library(startR)
system("tree")
system("tree") %>% cat()
library(dplyr)
system("tree") %>% cat()
system("tree >> tree.txt")
system("echo tree >> tree.txt")
shell("tree")
shell("tree") -> a
a
shell("echo tree >> tree.txt")
shell("tree  >> tree.txt")
list.files
list.files()
list.dirs()
list.dirs(full.names = F)
list.dirs(recursive = F)
dir()
path.expand()
library(data.tree)
path <- c(
"root/a/some/file.R",
"root/a/another/file.R",
"root/a/another/cool/file.R",
"root/b/some/data.csv",
"root/b/more/data.csv"
)
library(data.tree); library(plyr)
x <- lapply(strsplit(path, "/"), function(z) as.data.frame(t(z)))
x <- rbind.fill(x)
x$pathString <- apply(x, 1, function(x) paste(trimws(na.omit(x)), collapse="/"))
(mytree <- data.tree::as.Node(x))
1  root
2   ¦--a
3   ¦   ¦--some
4   ¦   ¦   °--file.R
5   ¦   °--another
6   ¦       ¦--file.R
7   ¦       °--cool
8   ¦           °--file.R
9   °--b
10      ¦--some
11      ¦   °--data.csv
12      °--more
13          °--data.csv
plot(mytree)
(mytree <- data.tree::as.Node(x))
dirs()
dir()
list.dirs()
path <- ist.dirs()
library(data.tree); library(plyr)
x <- lapply(strsplit(path, "/"), function(z) as.data.frame(t(z)))
x <- rbind.fill(x)
x$pathString <- apply(x, 1, function(x) paste(trimws(na.omit(x)), collapse="/"))
(mytree <- data.tree::as.Node(x))
path <- list.dirs()
library(data.tree); library(plyr)
x <- lapply(strsplit(path, "/"), function(z) as.data.frame(t(z)))
x <- rbind.fill(x)
x$pathString <- apply(x, 1, function(x) paste(trimws(na.omit(x)), collapse="/"))
(mytree <- data.tree::as.Node(x))
(mytree <- data.tree::as.Node(data.frame(pathString = path)))
path <- list.dirs(full.names = F)
(mytree <- data.tree::as.Node(data.frame(pathString = path)))
path <- list.dirs(recursive = F)
(mytree <- data.tree::as.Node(data.frame(pathString = path)))
writeLines(mytree, "README.md")
writeLines(text = cat(mytree), "README.md")
cat(mytree)
print(mytree)
mytree
path <- list.dirs()
(mytree <- data.tree::as.Node(data.frame(pathString = path)))
class(mytree)
mytree %>% as.character()
as.character(my_tree)
as.character(mytree)
print(mytree)
summary(mytree)
mytree$Get()
path
?saveRDS
data.frame(pathString = path)
mytree
mytree$children
a <- print(mytree)
a
class(a)
cat(a)
writeLines(text = a, con = "README.md")
a
paste(a)
a
writeLines(text = paste(a), con = "README.md")
drat::addRepo("stlarepo")
install.packages("dir2json")
install.packages("drat")
drat::addRepo("stlarepo")
install.packages("dir2json")
library(dir2json)
dir2tree("src")
cat(dir2tree("src"))
library(dir2json)
install.packages("dir2json")
devtools::install_github("stla/dir2json")
dir2tree <- function(dir, depth=NULL, vertical=FALSE){
if(!dir.exists(dir)){
stop(sprintf("Folder %s not found.", dir))
}
.dir2tree(dir, ifelse(is.null(depth) || is.na(depth) || is.infinite(depth), -1L, depth), as.integer(vertical))
}
dir2tree("src")
dir2tree()
dir2tree(dir = getwd())
.dir2tree <- function(dir, depth, vertical){
.C("dirToTreeR", depth=as.integer(depth), dir=as.character(dir),
vertical=as.integer(vertical), result=character(1L), NACK=TRUE)$result
}
.dir2tree <- function(dir, depth, vertical){
.C("dirToTreeR", depth=as.integer(depth), dir=as.character(dir),
vertical=as.integer(vertical), result=character(1L), NACK=TRUE)$result
}
dir2tree(dir = getwd())
dir2tree(".", 1)
mytree
paste(mytree)
glue::glue(mytree)
c(mytree)
mytree
tiff("tree.tiff", width=4, height=3, units="in", res=300)
plot(mytree)
dev.off()
writeLines(text = "## Repository structure \n\n![Repository structure](tree.tiff)", con = "README.md")
create_readme
source('~/GitHub/startR/R/create_readme.R')
create_readme()
create_readme(repo = test, orcid = "<a href="https://orcid.org/0000-0003-1245-589X" target="orcid.widget" rel="noopener noreferrer" style="vertical-align:top;"><img src="https://orcid.org/sites/default/files/images/orcid_16x16.png" style="width:1em;margin-right:.5em;" alt="ORCID iD icon">orcid.org/0000-0003-1245-589X</a>")
create_readme(repo = "test", orcid = '<a href="https://orcid.org/0000-0003-1245-589X" target="orcid.widget" rel="noopener noreferrer" style="vertical-align:top;"><img src="https://orcid.org/sites/default/files/images/orcid_16x16.png" style="width:1em;margin-right:.5em;" alt="ORCID iD icon">orcid.org/0000-0003-1245-589X</a>')
source('~/GitHub/startR/R/create_readme.R')
create_readme(repo = "test", orcid = '<a href="https://orcid.org/0000-0003-1245-589X" target="orcid.widget" rel="noopener noreferrer" style="vertical-align:top;"><img src="https://orcid.org/sites/default/files/images/orcid_16x16.png" style="width:1em;margin-right:.5em;" alt="ORCID iD icon">orcid.org/0000-0003-1245-589X</a>')
source('~/GitHub/startR/R/create_readme.R')
create_readme(repo = "test", orcid = '<a href="https://orcid.org/0000-0003-1245-589X" target="orcid.widget" rel="noopener noreferrer" style="vertical-align:top;"><img src="https://orcid.org/sites/default/files/images/orcid_16x16.png" style="width:1em;margin-right:.5em;" alt="ORCID iD icon">orcid.org/0000-0003-1245-589X</a>')
tiff("tree.tiff", width=4, height=3, units="in", res=300)
plot(mytree)
dev.off()
tiff("tree.tif", width=4, height=3, units="in", res=300)
plot(mytree)
dev.off()
?tif
?tiff
png("tree.png", width=4, height=3, units="in", res=300)
plot(mytree)
dev.off()
a <- plot(mytree)
a
a <- plot(mytree)
(mytree <- data.tree::as.Node(data.frame(pathString = path)))
tree <- plot(mytree)
png("tree.png", width=4, height=3, units="in", res=300)
tree
dev.off()
class(a)
cat(a)
print(a)
summary(a)
source('~/GitHub/startR/R/create_readme.R')
create_readme(repo = "test", orcid = '<a href="https://orcid.org/0000-0003-1245-589X" target="orcid.widget" rel="noopener noreferrer" style="vertical-align:top;"><img src="https://orcid.org/sites/default/files/images/orcid_16x16.png" style="width:1em;margin-right:.5em;" alt="ORCID iD icon">orcid.org/0000-0003-1245-589X</a>')
data.tree::ToDataFrameTree(mytree)
data.tree::ToDataFrameTree(mytree) %>% class()
mytree <- list.dirs() %>%
data.frame() %>%
magrittr::set_colnames("patString") %>%
data.tree::as.Node() %>%
data.tree::ToDataFrameTree()
mytree <- list.dirs() %>%
data.frame() %>%
magrittr::set_colnames(value = "patString") %>%
data.tree::as.Node() %>%
data.tree::ToDataFrameTree()
mytree <- data.frame(pathString = list.dirs()) %>%
data.tree::as.Node() %>%
data.tree::ToDataFrameTree()
mytree
writeLines(text = paste0("#", repo,"\n\n",
"## Repository structure \n\n",
mytree,
"--------- \n\n",
orcid), con = "README.md")
source('~/GitHub/startR/R/create_readme.R')
create_readme(repo = "test", orcid = '<a href="https://orcid.org/0000-0003-1245-589X" target="orcid.widget" rel="noopener noreferrer" style="vertical-align:top;"><img src="https://orcid.org/sites/default/files/images/orcid_16x16.png" style="width:1em;margin-right:.5em;" alt="ORCID iD icon">orcid.org/0000-0003-1245-589X</a>')
libPaths()
.libPaths()
mytree %>% as.list()
tree <- data.frame(pathString = list.dirs()) %>%
data.tree::as.Node()
writeLines(text = paste0("#", repo,"\n\n",
"## Repository structure \n\n",
as.list(tree),
"--------- \n\n",
orcid), con = "README.md")
source('~/GitHub/startR/R/create_readme.R')
create_readme(repo = "test", orcid = '<a href="https://orcid.org/0000-0003-1245-589X" target="orcid.widget" rel="noopener noreferrer" style="vertical-align:top;"><img src="https://orcid.org/sites/default/files/images/orcid_16x16.png" style="width:1em;margin-right:.5em;" alt="ORCID iD icon">orcid.org/0000-0003-1245-589X</a>')
as.list(tree)
as.list(mytree)
class(mytree)
source('~/GitHub/startR/R/create_readme.R')
create_readme(repo = "test", orcid = '<a href="https://orcid.org/0000-0003-1245-589X" target="orcid.widget" rel="noopener noreferrer" style="vertical-align:top;"><img src="https://orcid.org/sites/default/files/images/orcid_16x16.png" style="width:1em;margin-right:.5em;" alt="ORCID iD icon">orcid.org/0000-0003-1245-589X</a>')
source('~/GitHub/startR/R/create_readme.R')
create_readme(repo = "test", orcid = '<a href="https://orcid.org/0000-0003-1245-589X" target="orcid.widget" rel="noopener noreferrer" style="vertical-align:top;"><img src="https://orcid.org/sites/default/files/images/orcid_16x16.png" style="width:1em;margin-right:.5em;" alt="ORCID iD icon">orcid.org/0000-0003-1245-589X</a>')
source('~/GitHub/startR/R/create_readme.R')
create_readme(repo = "test", orcid = '<a href="https://orcid.org/0000-0003-1245-589X" target="orcid.widget" rel="noopener noreferrer" style="vertical-align:top;"><img src="https://orcid.org/sites/default/files/images/orcid_16x16.png" style="width:1em;margin-right:.5em;" alt="ORCID iD icon">orcid.org/0000-0003-1245-589X</a>')
source('~/GitHub/startR/R/create_readme.R')
create_readme(repo = "test", orcid = '<a href="https://orcid.org/0000-0003-1245-589X" target="orcid.widget" rel="noopener noreferrer" style="vertical-align:top;"><img src="https://orcid.org/sites/default/files/images/orcid_16x16.png" style="width:1em;margin-right:.5em;" alt="ORCID iD icon">orcid.org/0000-0003-1245-589X</a>')
twee <- function(path = getwd(), level = Inf) {
fad <-
list.files(path = path, recursive = TRUE,no.. = TRUE, include.dirs = TRUE)
fad_split_up <- strsplit(fad, "/")
too_deep <- lapply(fad_split_up, length) > level
fad_split_up[too_deep] <- NULL
jfun <- function(x) {
n <- length(x)
if(n > 1)
x[n - 1] <- "|__"
if(n > 2)
x[1:(n - 2)] <- "   "
x <- if(n == 1) c("-- ", x) else c("   ", x)
x
}
fad_subbed_out <- lapply(fad_split_up, jfun)
cat(unlist(lapply(fad_subbed_out, paste, collapse = "")), sep = "\n")
}
twee()
unlink(c("example"), recursive = TRUE)
unlink(c("man"), recursive = TRUE)
dectools::document()
devtools::document()
tree <- twee(level = 2)
tree
tree <- twee(level = 2)
source('~/GitHub/startR/R/create_readme.R')
create_readme(repo = "test", orcid = '<a href="https://orcid.org/0000-0003-1245-589X" target="orcid.widget" rel="noopener noreferrer" style="vertical-align:top;"><img src="https://orcid.org/sites/default/files/images/orcid_16x16.png" style="width:1em;margin-right:.5em;" alt="ORCID iD icon">orcid.org/0000-0003-1245-589X</a>')
twee <- function(path = getwd(), level = Inf) {
fad <-
list.files(path = path, recursive = TRUE,no.. = TRUE, include.dirs = TRUE)
fad_split_up <- strsplit(fad, "/")
too_deep <- lapply(fad_split_up, length) > level
fad_split_up[too_deep] <- NULL
jfun <- function(x) {
n <- length(x)
if(n > 1)
x[n - 1] <- "|__"
if(n > 2)
x[1:(n - 2)] <- "   "
x <- if(n == 1) c("-- ", x) else c("   ", x)
x
}
fad_subbed_out <- lapply(fad_split_up, jfun)
tree <- cat(unlist(lapply(fad_subbed_out, paste, collapse = "")), sep = "\n")
return(tree)
}
create_readme <- function(repo = "Repository", orcid = NULL){path <- list.dirs()
writeLines(text = paste0("#", repo,"\n\n",
"## Repository structure \n\n",
twee(level = 2),
"--------- \n\n",
orcid), con = "README.md")
}
create_readme(repo = "test", orcid = '<a href="https://orcid.org/0000-0003-1245-589X" target="orcid.widget" rel="noopener noreferrer" style="vertical-align:top;"><img src="https://orcid.org/sites/default/files/images/orcid_16x16.png" style="width:1em;margin-right:.5em;" alt="ORCID iD icon">orcid.org/0000-0003-1245-589X</a>')
source('~/GitHub/startR/R/create_readme.R')
create_readme(repo = "test", orcid = '<a href="https://orcid.org/0000-0003-1245-589X" target="orcid.widget" rel="noopener noreferrer" style="vertical-align:top;"><img src="https://orcid.org/sites/default/files/images/orcid_16x16.png" style="width:1em;margin-right:.5em;" alt="ORCID iD icon">orcid.org/0000-0003-1245-589X</a>')
source('~/GitHub/startR/R/create_readme.R')
create_readme(repo = "test", orcid = '<a href="https://orcid.org/0000-0003-1245-589X" target="orcid.widget" rel="noopener noreferrer" style="vertical-align:top;"><img src="https://orcid.org/sites/default/files/images/orcid_16x16.png" style="width:1em;margin-right:.5em;" alt="ORCID iD icon">orcid.org/0000-0003-1245-589X</a>')
source('~/GitHub/startR/R/create_readme.R')
create_readme(repo = "test", orcid = '<a href="https://orcid.org/0000-0003-1245-589X" target="orcid.widget" rel="noopener noreferrer" style="vertical-align:top;"><img src="https://orcid.org/sites/default/files/images/orcid_16x16.png" style="width:1em;margin-right:.5em;" alt="ORCID iD icon">orcid.org/0000-0003-1245-589X</a>')
source('~/GitHub/startR/R/create_readme.R')
create_readme(repo = "test", orcid = '<a href="https://orcid.org/0000-0003-1245-589X" target="orcid.widget" rel="noopener noreferrer" style="vertical-align:top;"><img src="https://orcid.org/sites/default/files/images/orcid_16x16.png" style="width:1em;margin-right:.5em;" alt="ORCID iD icon">orcid.org/0000-0003-1245-589X</a>')
create_readme(repo = "test")
library(startR)
source('~/GitHub/startR/R/create_readme.R')
library(startR)
devtools::document()
library(startR)
source('~/GitHub/startR/R/create_readme.R')
library(startR)
rmarkdown::draft
rmarkdown::draft %>% View()
View(rmarkdown::draft)
rmarkdown::draft(file = "test", template = "pdf_manuscript", package = "startR")
library(startR)
rmarkdown::draft(file = "test", template = "pdf_manuscript", package = "startR")
rmarkdown::draft(file = "test", template = "pdf_manuscript", package = "startR", name = "testing")
rmarkdown::draft(file = "test", template = "pdf_manuscript", package = "startR")
rmarkdown::draft(file = "rmd/manuscript", template = "pdf_manuscript", package = "startR")
roxygen2::roxygenize()
library(startR)
?startR
library(startR)
roxygen2::roxygenize()
library(startR)
devtools::document()
library(startR)
devtools::build()
devtools::document()
library(startR)
startR::setup()
startR::usual_suspects()
packages <- c("janitor", "here", "sf", "tidyverse")
sapply(packages, library)
lapply(packages, library)
apply(packages, library)
purrr::map(packages, library)
packages
length(packages)
library(packages)
library(packages[])
